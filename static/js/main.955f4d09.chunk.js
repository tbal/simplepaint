(this.webpackJsonpsimplepaint=this.webpackJsonpsimplepaint||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(8),r=a.n(i),l=(a(14),a(4)),o=a.n(l),s=a(6),u=a(2),d=a(1);a(16);function f(e,t){var a=c.a.useState(JSON.parse(localStorage.getItem(e))||t),n=Object(d.a)(a,2),i=n[0],r=n[1];return c.a.useEffect((function(){localStorage.setItem(e,JSON.stringify(i))}),[e,i]),[i,r]}function m(e){e.clearRect(0,0,window.innerWidth,window.innerHeight)}function h(e,t,a){var n,c,i,r=e.getImageData(t,a,1,1).data;return n=r[0],c=r[1],i=r[2],n=n.toString(16),c=c.toString(16),i=i.toString(16),1===n.length&&(n="0"+n),1===c.length&&(c="0"+c),1===i.length&&(i="0"+i),"#"+n+c+i}function p(e,t,a,n,c,i){e.drawImage(t,a,n,c,i)}function g(e,t,a,n,c,i){var r=new Image;return r.src=t,new Promise((function(t){r.onload=function(){p(e,r,a,n,c,i),t()}}))}var v=[],b=!1,E=!1;var y=function(){var e=c.a.useState(!1),t=Object(d.a)(e,2),a=t[0],n=(t[1],c.a.useState(!1)),i=Object(d.a)(n,2),r=i[0],l=i[1],y=c.a.useState(!1),w=Object(d.a)(y,2),k=w[0],x=w[1],N=c.a.useState(!1),O=Object(d.a)(N,2),j=O[0],S=O[1],C=c.a.useState(!1),L=Object(d.a)(C,2),R=L[0],W=L[1],M=f("history",[]),P=Object(d.a)(M,2),Y=P[0],D=P[1],I=f("redoStack",[]),X=Object(d.a)(I,2),T=X[0],J=X[1],U=c.a.useState(),A=Object(d.a)(U,2),B=A[0],F=A[1],Z=c.a.useState(null),q=Object(d.a)(Z,2),z=q[0],H=q[1],G=c.a.useState({width:300,height:300}),$=Object(d.a)(G,2),K=$[0],Q=$[1],V=c.a.useState({x:0,y:0}),_=Object(d.a)(V,2),ee=_[0],te=_[1],ae=c.a.useState({x:0,y:0}),ne=Object(d.a)(ae,2),ce=ne[0],ie=ne[1],re=c.a.useState({x:0,y:0}),le=Object(d.a)(re,2),oe=le[0],se=le[1],ue=c.a.useState("#000000"),de=Object(d.a)(ue,2),fe=de[0],me=de[1],he=f("tool","pencil"),pe=Object(d.a)(he,2),ge=pe[0],ve=pe[1],be=f("previousTool","pencil"),Ee=Object(d.a)(be,2),ye=Ee[0],we=(Ee[1],f("color","#000000")),ke=Object(d.a)(we,2),xe=ke[0],Ne=ke[1],Oe=f("brushSize",20),je=Object(d.a)(Oe,2),Se=je[0],Ce=je[1],Le=f("eraserSize",50),Re=Object(d.a)(Le,2),We=Re[0],Me=Re[1],Pe=c.a.useRef(null),Ye=c.a.useRef(null),De=c.a.useRef(null);function Ie(e){if(b)switch(e.preventDefault(),e.stopPropagation(),e.key){case"Escape":"keydown"===e.type&&(H(null),b=!1);break;case"Alt":E="keydown"===e.type}}function Xe(e){e.dataTransfer.dropEffect="copy",e.preventDefault()}function Te(e){if(e.type.match(/image.*/)){var t=new Image,a=new FileReader;l(!0),a.readAsDataURL(e),a.onload=function(){t.dataset.base64=a.result,t.src=URL.createObjectURL(e),t.onload=function(){H(t);var e=Math.min(K.width,t.width);Q({width:e,height:e*t.height/t.width}),l(!1)}}}}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;m(e);var a=Y.length,n=null;if(t>0&&T.length){n=[].concat(Object(u.a)(Y),[T[T.length-1]]),D(n),a++;var c=T.slice(0,-1);J(c)}if(t<0&&Y.length){var i=[].concat(Object(u.a)(T),Object(u.a)(Y.slice(t).reverse()));J(i),n=Y.slice(0,t),D(n),a+=t}if(a){var r=0,d=0;Object(u.a)(Y).reverse().find((function(e){var t="clear"===e.tool;return t&&d>0&&(r=Y.length-d),d++,t})),function(){var t=Object(s.a)(o.a.mark((function t(){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=r;case 1:if(!(c<a)){t.next=7;break}return t.next=4,Ue(e,(n||Y)[c]);case 4:c++,t.next=1;break;case 7:l(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}else l(!1)}function Ue(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(s.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("clear"!==a.tool){e.next=4;break}m(t),e.next=10;break;case 4:if("image"!==a.tool){e.next=9;break}return e.next=7,g(t,a.src,a.dx,a.dy,a.width,a.height);case 7:e.next=10;break;case 9:a.sequence.length&&a.sequence.forEach((function(e){return Be(e[0],e[1],t,a.tool,a.color,a.lineWidth)}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t,a,n,c,i){if(a.save(),a.lineJoin="round",a.lineCap="round",a.lineWidth=i||Se,a.strokeStyle=c||xe,("eraser"===n||"undefined"===typeof n&&"eraser"===ge)&&(a.lineWidth=We,a.globalCompositeOperation="destination-out"),a.beginPath(),a.moveTo(e.x,e.y),"spray"===n||"undefined"===typeof n&&"spray"===ge){var r=i||Se;a.fillStyle=c||xe,a.rect(t.x,t.y,1,1);for(var l=r;l--;)a.rect(t.x+Math.random()*r-r/2,t.y+Math.random()*r-r/2,1,1),a.fill()}else a.lineTo(t.x,t.y),a.stroke();a.closePath(),a.restore()}function Fe(e){!0===k&&!1===j&&(te({x:e.clientX,y:e.clientY}),ie({x:e.clientX,y:e.clientY}),function(e,t,a){ie({x:t.x,y:++t.y}),v.push([e,t]),Be(e,t,a)}(ee,ce,B)),v.length&&(D([].concat(Object(u.a)(Y),[{tool:ge,lineWidth:"eraser"===ge?We:Se,color:xe,sequence:v}])),J([]),v=[]),x(!1),S(!1)}return c.a.useEffect((function(){var e=Pe.current,t=e.getContext("2d");F(t),e.width=window.innerWidth,e.height=window.innerHeight,document.addEventListener("mousemove",(function(e){se({x:e.clientX,y:e.clientY})})),window.addEventListener("resize",(function(){Pe.current.width=window.innerWidth,Pe.current.height=window.innerHeight,Je(Pe.current.getContext("2d"))})),document.addEventListener("keydown",Ie),document.addEventListener("keyup",Ie),window.addEventListener("dragover",(function(e){e.preventDefault(),e.stopPropagation(),null===z&&W(!0)})),Ye.current.addEventListener("dragenter",Xe),Ye.current.addEventListener("dragover",Xe),Ye.current.addEventListener("dragleave",(function(){W(!1)})),Ye.current.addEventListener("drop",(function(e){e.preventDefault(),null===z&&(W(!1),Te(e.dataTransfer.files[0]))})),Je(t)}),[Pe]),c.a.useEffect((function(){Pe.current.className="",Pe.current.classList.add("cursor-"+ge)}),[ge]),c.a.useEffect((function(){r?document.body.classList.add("loading"):document.body.classList.remove("loading")}),[r]),c.a.useEffect((function(){b=null!==z}),[z]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"icon-bar"},c.a.createElement("span",null,c.a.createElement("input",{title:"Farbauswahl",type:"color",value:xe,onChange:function(e){Ne(e.target.value),"eraser"===ge&&ve("pencil")}})),c.a.createElement("div",{className:"spacer"}),c.a.createElement("div",{className:"section"},c.a.createElement("button",{title:"Pinsel",onClick:function(){return ve("pencil")},className:("pencil"===ge?"active ":"")+"has-option-bar"},c.a.createElement("i",{className:"fas fa-pencil-alt"})),c.a.createElement("div",{className:"option-bar"},c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-circle"})),c.a.createElement("input",{title:"Pinselst\xe4rke",type:"range",value:Se,onChange:function(e){Ce(e.target.value),ve("pencil")},min:"1",max:"100",step:"1",orient:"vertical"}),c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-circle"})))),c.a.createElement("div",{className:"section"},c.a.createElement("button",{title:"Spr\xfchflasche",onClick:function(){return ve("spray")},className:("spray"===ge?"active ":"")+"has-option-bar"},c.a.createElement("i",{className:"fas fa-spray-can"})),c.a.createElement("div",{className:"option-bar"},c.a.createElement("span",{class:"circle-crop"},c.a.createElement("i",{className:"fas fa-chess-board"})),c.a.createElement("input",{title:"Spr\xfchst\xe4rke",type:"range",value:Se,onChange:function(e){Ce(e.target.value),ve("spray")},min:"1",max:"100",step:"1",orient:"vertical"}),c.a.createElement("span",{class:"circle-crop"},c.a.createElement("i",{className:"fas fa-chess-board"})))),c.a.createElement("div",{className:"section"},c.a.createElement("button",{title:"Radierer",onClick:function(){return ve("eraser")},className:("eraser"===ge?"active ":"")+"has-option-bar"},c.a.createElement("i",{className:"fas fa-eraser"})),c.a.createElement("div",{className:"option-bar"},c.a.createElement("span",null,c.a.createElement("i",{className:"far fa-circle"})),c.a.createElement("input",{title:"Radierergr\xf6\xdfe",type:"range",value:We,onChange:function(e){Me(e.target.value),ve("eraser")},min:"1",max:"100",step:"1",orient:"vertical"}),c.a.createElement("span",null,c.a.createElement("i",{className:"far fa-circle"})))),c.a.createElement("button",{title:"Farbpipette",onClick:function(){return ve("colorpicker")},className:"colorpicker"===ge?"active ":""},c.a.createElement("i",{className:"fas fa-eye-dropper"})),c.a.createElement("div",{className:"spacer"}),c.a.createElement("button",{onClick:function(){De.current.click()},title:"Bild einf\xfcgen"},c.a.createElement("i",{className:"fas fa-image"})),c.a.createElement("input",{ref:De,id:"uploadButton",type:"file",onChange:function(e){Te(e.target.files[0])},hidden:!0}),c.a.createElement("div",{className:"spacer"}),c.a.createElement("button",{title:"R\xfcckg\xe4ngig machen",onClick:function(){l(!0),Je(B,-1)},disabled:!Y.length},c.a.createElement("i",{className:"fas fa-undo"})),c.a.createElement("button",{title:"Wiederholen",onClick:function(){l(!0),Je(B,1)},disabled:!T.length},c.a.createElement("i",{className:"fas fa-redo"})),c.a.createElement("button",{title:"Zeichnung leeren",onClick:function(){m(B),D([].concat(Object(u.a)(Y),[{tool:"clear"}])),J([])},disabled:!Y.length||"clear"===Y[Y.length-1].tool},c.a.createElement("i",{className:"fas fa-broom"})),c.a.createElement("div",{className:"spacer"}),c.a.createElement("button",{title:"Zeichnung als PNG exportieren",onClick:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image.png",a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}(Pe.current.toDataURL())}},c.a.createElement("i",{className:"fas fa-file-download"})),c.a.createElement("div",{className:"spacer"}),c.a.createElement("button",{title:"Zeichnung verwerfen",onClick:function(){m(B),D([]),J([])},disabled:!Y.length&&!T.length},c.a.createElement("i",{className:"fas fa-trash-alt"}))),c.a.createElement("canvas",{ref:Pe,onMouseDown:function(e){0===e.button&&"colorpicker"!==ge&&(x(!0),te({x:e.clientX,y:e.clientY}),ie({x:e.clientX,y:e.clientY}))},onMouseMove:function(e){"colorpicker"===ge&&me(h(B,e.clientX,e.clientY)),!0===k&&(S(!0),te({x:ce.x,y:ce.y}),ie({x:e.clientX,y:e.clientY}),v.push([ee,ce]),Be(ee,ce,B))},onMouseUp:function(e){if("colorpicker"===ge)return Ne(h(B,e.clientX,e.clientY)),void ve(["pencil","spray"].includes(ye)?ye:"pencil");Fe(e)},onMouseOut:function(e){Fe(e)}}),c.a.createElement("div",{id:"debugTooltip",style:{left:oe.x,top:oe.y+20},className:a?"":"hidden "},"x: ",oe.x," y: ",oe.y),c.a.createElement("div",{id:"colorPickerTooltip",style:{left:oe.x,top:oe.y+20,backgroundColor:fe},className:"colorpicker"===ge?"":"hidden "}),c.a.createElement("div",{ref:Ye,id:"dropZone",className:R?"":"hidden "}),c.a.createElement("img",{id:"uploadedImage",src:null!==z?z.src:"",alt:"",className:null===z?"hidden":"",style:{left:null===z?0:oe.x-K.width/2,top:null===z?0:oe.y-K.height/2},width:K.width,height:K.height,onClick:function(){null!==z&&(p(B,z,oe.x-K.width/2,oe.y-K.height/2,K.width,K.height),D([].concat(Object(u.a)(Y),[{tool:"image",src:z.dataset.base64,dx:oe.x-K.width/2,dy:oe.y-K.height/2,width:K.width,height:K.height}])),J([]),E||H(null))},onWheel:function(e){var t=-.5*e.deltaY,a=K.width+t;a=Math.max(50,a),Q({width:a,height:a*e.target.height/e.target.width})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.955f4d09.chunk.js.map