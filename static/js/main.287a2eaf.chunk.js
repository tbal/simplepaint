(this.webpackJsonpsimplepaint=this.webpackJsonpsimplepaint||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(8),i=a.n(r),l=(a(14),a(4)),o=a.n(l),s=a(6),u=a(2),d=a(1);a(16);function f(e,t){var a=c.a.useState(JSON.parse(localStorage.getItem(e))||t),n=Object(d.a)(a,2),r=n[0],i=n[1];return c.a.useEffect((function(){localStorage.setItem(e,JSON.stringify(r))}),[e,r]),[r,i]}function m(e){e.clearRect(0,0,window.innerWidth,window.innerHeight)}function h(e,t,a){var n,c,r,i=e.getImageData(t,a,1,1).data;return n=i[0],c=i[1],r=i[2],n=n.toString(16),c=c.toString(16),r=r.toString(16),1===n.length&&(n="0"+n),1===c.length&&(c="0"+c),1===r.length&&(r="0"+r),"#"+n+c+r}function p(e,t,a,n,c,r){e.drawImage(t,a,n,c,r)}function g(e,t,a,n,c,r){var i=new Image;return i.src=t,new Promise((function(t){i.onload=function(){p(e,i,a,n,c,r),t()}}))}var v=[],b=!1,E=!1;var y=function(){var e=c.a.useState(!1),t=Object(d.a)(e,2),a=(t[0],t[1],c.a.useState(!1)),n=Object(d.a)(a,2),r=n[0],i=n[1],l=c.a.useState(!1),y=Object(d.a)(l,2),w=y[0],k=y[1],x=c.a.useState(!1),N=Object(d.a)(x,2),O=N[0],j=N[1],S=c.a.useState(!1),C=Object(d.a)(S,2),L=C[0],R=C[1],W=f("history",[]),M=Object(d.a)(W,2),P=M[0],Y=M[1],D=f("redoStack",[]),I=Object(d.a)(D,2),X=I[0],T=I[1],J=c.a.useState(),U=Object(d.a)(J,2),A=U[0],B=U[1],F=c.a.useState(null),Z=Object(d.a)(F,2),q=Z[0],z=Z[1],H=c.a.useState({width:300,height:300}),G=Object(d.a)(H,2),$=G[0],K=G[1],Q=c.a.useState({x:0,y:0}),V=Object(d.a)(Q,2),_=V[0],ee=V[1],te=c.a.useState({x:0,y:0}),ae=Object(d.a)(te,2),ne=ae[0],ce=ae[1],re=c.a.useState({x:0,y:0}),ie=Object(d.a)(re,2),le=ie[0],oe=ie[1],se=c.a.useState("#000000"),ue=Object(d.a)(se,2),de=ue[0],fe=ue[1],me=f("tool","pencil"),he=Object(d.a)(me,2),pe=he[0],ge=he[1],ve=f("previousTool","pencil"),be=Object(d.a)(ve,2),Ee=be[0],ye=(be[1],f("color","#000000")),we=Object(d.a)(ye,2),ke=we[0],xe=we[1],Ne=f("brushSize",20),Oe=Object(d.a)(Ne,2),je=Oe[0],Se=Oe[1],Ce=f("eraserSize",50),Le=Object(d.a)(Ce,2),Re=Le[0],We=Le[1],Me=c.a.useRef(null),Pe=c.a.useRef(null),Ye=c.a.useRef(null);function De(e){if(b)switch(e.preventDefault(),e.stopPropagation(),e.key){case"Escape":"keydown"===e.type&&(z(null),b=!1);break;case"Alt":E="keydown"===e.type}}function Ie(e){e.dataTransfer.dropEffect="copy",e.preventDefault()}function Xe(e){if(e.type.match(/image.*/)){var t=new Image,a=new FileReader;i(!0),a.readAsDataURL(e),a.onload=function(){t.dataset.base64=a.result,t.src=URL.createObjectURL(e),t.onload=function(){z(t);var e=Math.min($.width,t.width);K({width:e,height:e*t.height/t.width}),i(!1)}}}}function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;m(e);var a=P.length,n=null;if(t>0&&X.length){n=[].concat(Object(u.a)(P),[X[X.length-1]]),Y(n),a++;var c=X.slice(0,-1);T(c)}if(t<0&&P.length){var r=[].concat(Object(u.a)(X),Object(u.a)(P.slice(t).reverse()));T(r),n=P.slice(0,t),Y(n),a+=t}if(a){var l=0,d=0;Object(u.a)(P).reverse().find((function(e){var t="clear"===e.tool;return t&&d>0&&(l=P.length-d),d++,t})),function(){var t=Object(s.a)(o.a.mark((function t(){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=l;case 1:if(!(c<a)){t.next=7;break}return t.next=4,Je(e,(n||P)[c]);case 4:c++,t.next=1;break;case 7:i(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}else i(!1)}function Je(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(s.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("clear"!==a.tool){e.next=4;break}m(t),e.next=10;break;case 4:if("image"!==a.tool){e.next=9;break}return e.next=7,g(t,a.src,a.dx,a.dy,a.width,a.height);case 7:e.next=10;break;case 9:a.sequence.length&&a.sequence.forEach((function(e){return Ae(e[0],e[1],t,a.tool,a.color,a.lineWidth)}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t,a,n,c,r){if(a.save(),a.lineJoin="round",a.lineCap="round",a.lineWidth=r||je,a.strokeStyle=c||ke,("eraser"===n||"undefined"===typeof n&&"eraser"===pe)&&(a.lineWidth=Re,a.globalCompositeOperation="destination-out"),a.beginPath(),a.moveTo(e.x,e.y),"spray"===n||"undefined"===typeof n&&"spray"===pe){var i=r||je;a.fillStyle=c||ke,a.rect(t.x,t.y,1,1);for(var l=i;l--;)a.rect(t.x+Math.random()*i-i/2,t.y+Math.random()*i-i/2,1,1),a.fill()}else a.lineTo(t.x,t.y),a.stroke();a.closePath(),a.restore()}function Be(e){!0===w&&!1===O&&(ee({x:e.clientX,y:e.clientY}),ce({x:e.clientX,y:e.clientY}),function(e,t,a){ce({x:t.x,y:++t.y}),v.push([e,t]),Ae(e,t,a)}(_,ne,A)),v.length&&(Y([].concat(Object(u.a)(P),[{tool:pe,lineWidth:"eraser"===pe?Re:je,color:ke,sequence:v}])),T([]),v=[]),k(!1),j(!1)}return c.a.useEffect((function(){var e=Me.current,t=e.getContext("2d");B(t),e.width=window.innerWidth,e.height=window.innerHeight,document.addEventListener("mousemove",(function(e){oe({x:e.clientX,y:e.clientY})})),window.addEventListener("resize",(function(){Me.current.width=window.innerWidth,Me.current.height=window.innerHeight,Te(Me.current.getContext("2d"))})),document.addEventListener("keydown",De),document.addEventListener("keyup",De),window.addEventListener("dragover",(function(e){e.preventDefault(),e.stopPropagation(),null===q&&R(!0)})),Pe.current.addEventListener("dragenter",Ie),Pe.current.addEventListener("dragover",Ie),Pe.current.addEventListener("dragleave",(function(){R(!1)})),Pe.current.addEventListener("drop",(function(e){e.preventDefault(),null===q&&(R(!1),Xe(e.dataTransfer.files[0]))})),Te(t)}),[Me]),c.a.useEffect((function(){Me.current.className="",Me.current.classList.add("cursor-"+pe)}),[pe]),c.a.useEffect((function(){r?document.body.classList.add("loading"):document.body.classList.remove("loading")}),[r]),c.a.useEffect((function(){b=null!==q}),[q]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"icon-bar"},c.a.createElement("span",null,c.a.createElement("input",{title:"Farbauswahl",type:"color",value:ke,onChange:function(e){xe(e.target.value),"eraser"===pe&&ge("pencil")}})),c.a.createElement("div",{className:"spacer"}),c.a.createElement("div",{className:"section"},c.a.createElement("button",{title:"Pinsel",onClick:function(){return ge("pencil")},className:("pencil"===pe?"active ":"")+"has-option-bar"},c.a.createElement("i",{className:"fas fa-pencil-alt"})),c.a.createElement("div",{className:"option-bar"},c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-circle"})),c.a.createElement("input",{title:"Pinselst\xe4rke",type:"range",value:je,onChange:function(e){Se(e.target.value),ge("pencil")},min:"1",max:"100",step:"1",orient:"vertical"}),c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-circle"})))),c.a.createElement("div",{className:"section"},c.a.createElement("button",{title:"Spr\xfchflasche",onClick:function(){return ge("spray")},className:("spray"===pe?"active ":"")+"has-option-bar"},c.a.createElement("i",{className:"fas fa-spray-can"})),c.a.createElement("div",{className:"option-bar"},c.a.createElement("span",{class:"circle-crop"},c.a.createElement("i",{className:"fas fa-chess-board"})),c.a.createElement("input",{title:"Spr\xfchst\xe4rke",type:"range",value:je,onChange:function(e){Se(e.target.value),ge("spray")},min:"1",max:"100",step:"1",orient:"vertical"}),c.a.createElement("span",{class:"circle-crop"},c.a.createElement("i",{className:"fas fa-chess-board"})))),c.a.createElement("div",{className:"section"},c.a.createElement("button",{title:"Radierer",onClick:function(){return ge("eraser")},className:("eraser"===pe?"active ":"")+"has-option-bar"},c.a.createElement("i",{className:"fas fa-eraser"})),c.a.createElement("div",{className:"option-bar"},c.a.createElement("span",null,c.a.createElement("i",{className:"far fa-circle"})),c.a.createElement("input",{title:"Radierergr\xf6\xdfe",type:"range",value:Re,onChange:function(e){We(e.target.value),ge("eraser")},min:"1",max:"100",step:"1",orient:"vertical"}),c.a.createElement("span",null,c.a.createElement("i",{className:"far fa-circle"})))),c.a.createElement("button",{title:"Farbpipette",onClick:function(){return ge("colorpicker")},className:"colorpicker"===pe?"active ":""},c.a.createElement("i",{className:"fas fa-eye-dropper"})),c.a.createElement("div",{className:"spacer"}),c.a.createElement("button",{onClick:function(){Ye.current.click()},title:"Bild einf\xfcgen"},c.a.createElement("i",{className:"fas fa-image"})),c.a.createElement("input",{ref:Ye,id:"uploadButton",type:"file",onChange:function(e){Xe(e.target.files[0])},hidden:!0}),c.a.createElement("div",{className:"spacer"}),c.a.createElement("button",{title:"R\xfcckg\xe4ngig machen",onClick:function(){i(!0),Te(A,-1)},disabled:!P.length},c.a.createElement("i",{className:"fas fa-undo"})),c.a.createElement("button",{title:"Wiederholen",onClick:function(){i(!0),Te(A,1)},disabled:!X.length},c.a.createElement("i",{className:"fas fa-redo"})),c.a.createElement("button",{title:"Zeichnung leeren",onClick:function(){m(A),Y([].concat(Object(u.a)(P),[{tool:"clear"}])),T([])},disabled:!P.length||"clear"===P[P.length-1].tool},c.a.createElement("i",{className:"fas fa-broom"})),c.a.createElement("div",{className:"spacer"}),c.a.createElement("button",{title:"Zeichnung als PNG exportieren",onClick:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image.png",a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}(Me.current.toDataURL())}},c.a.createElement("i",{className:"fas fa-file-download"})),c.a.createElement("div",{className:"spacer"}),c.a.createElement("button",{title:"Zeichnung verwerfen",onClick:function(){m(A),Y([]),T([])},disabled:!P.length&&!X.length},c.a.createElement("i",{className:"fas fa-trash-alt"}))),c.a.createElement("canvas",{ref:Me,onMouseDown:function(e){0===e.button&&"colorpicker"!==pe&&(k(!0),ee({x:e.clientX,y:e.clientY}),ce({x:e.clientX,y:e.clientY}))},onMouseMove:function(e){"colorpicker"===pe&&fe(h(A,e.clientX,e.clientY)),!0===w&&(j(!0),ee({x:ne.x,y:ne.y}),ce({x:e.clientX,y:e.clientY}),v.push([_,ne]),Ae(_,ne,A))},onMouseUp:function(e){if("colorpicker"===pe)return xe(h(A,e.clientX,e.clientY)),void ge(["pencil","spray"].includes(Ee)?Ee:"pencil");Be(e)},onMouseOut:function(e){Be(e)}}),c.a.createElement("div",{id:"colorPickerTooltip",style:{left:le.x,top:le.y+20,backgroundColor:de},className:"colorpicker"===pe?"":"hidden "}),c.a.createElement("div",{ref:Pe,id:"dropZone",className:L?"":"hidden "}),c.a.createElement("img",{id:"uploadedImage",src:null!==q?q.src:"",alt:"",className:null===q?"hidden":"",style:{left:null===q?0:le.x-$.width/2,top:null===q?0:le.y-$.height/2},width:$.width,height:$.height,onClick:function(){null!==q&&(p(A,q,le.x-$.width/2,le.y-$.height/2,$.width,$.height),Y([].concat(Object(u.a)(P),[{tool:"image",src:q.dataset.base64,dx:le.x-$.width/2,dy:le.y-$.height/2,width:$.width,height:$.height}])),T([]),E||z(null))},onWheel:function(e){var t=-.5*e.deltaY,a=$.width+t;a=Math.max(50,a),K({width:a,height:a*e.target.height/e.target.width})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.287a2eaf.chunk.js.map